"use strict";
jQuery(function (e) {
    e(document).ready(function () {
        var n, i;
        e(".menu").is(".desktop") &&
            ((n = function (t, n) {
                n = 1 < arguments.length && void 0 !== n && n;
                t.attr("aria-expanded", "true"),
                    t.siblings("ul").attr("aria-hidden", "false"),
                    1 == n &&
                        setTimeout(function () {
                            t.closest("li.parent")
                                .find("ul a, ul button")
                                .first()
                                .focus();
                        }, 100);
            }),
            (i = function (t, n) {
                1 == (!(1 < arguments.length && void 0 !== n) || n) &&
                    setTimeout(function () {
                        t.focus();
                    }, 100),
                    t.attr("aria-expanded", "false"),
                    t.siblings("ul").attr("aria-hidden", "true");
            }),
            e(".menu li.parent").hover(
                function () {
                    n(e(this).children("button, a"));
                },
                function () {
                    i(e(this).children("button, a"), !1);
                }
            ),
            e(".menu > li.parent > a, .menu > li.parent > button").on(
                "click",
                function (t) {
                    "true" == e(this).attr("aria-expanded")
                        ? i(e(this), !1)
                        : (i(e(".menu li.parent").children("button, a"), !1),
                          n(e(this), !0));
                }
            ),
            e(
                ".menu.dropdown ul li.parent > a, .menu.dropdown ul li.parent > button"
            ).on("click", function (t) {
                "true" == e(this).attr("aria-expanded")
                    ? i(e(this), !1)
                    : n(e(this), !0);
            }),
            e(".menu ul button, .menu ul a").keydown(function (t) {
                ("Escape" != t.key && "Esc" != t.key) ||
                    i(
                        e(this)
                            .closest('[aria-hidden="false"]')
                            .closest(".parent")
                            .children("a, button")
                    );
            }),
            e(".menu.dropdown .parent").each(function () {
                e(this)
                    .find("li:first a:first, li:first button:first")
                    .keydown(function (t) {
                        "Tab" === t.key &&
                            t.shiftKey &&
                            i(
                                e(this)
                                    .closest('[aria-hidden="false"]')
                                    .closest(".parent")
                                    .children("a, button")
                            );
                    });
            }),
            e(".menu.grid .parent.top, .menu.multi-column .parent.top").each(
                function () {
                    e(this).find("li:first").hasClass("parent")
                        ? e(this)
                              .find("li:first ul:first a:first")
                              .keydown(function (t) {
                                  "Tab" === t.key &&
                                      t.shiftKey &&
                                      i(
                                          e(this)
                                              .closest('[aria-hidden="false"]')
                                              .closest(".parent")
                                              .children("a, button")
                                      );
                              })
                        : e(this)
                              .find("li:first a:first")
                              .keydown(function (t) {
                                  "Tab" === t.key &&
                                      t.shiftKey &&
                                      i(
                                          e(this)
                                              .closest('[aria-hidden="false"]')
                                              .closest(".parent")
                                              .children("a, button")
                                      );
                              });
                }
            ),
            e(".menu.dropdown .parent").each(function () {
                e(this)
                    .find("li:last-of-type a:last, li:last-of-type button:last")
                    .keydown(function (t) {
                        "Tab" !== t.key ||
                            t.shiftKey ||
                            i(
                                e(this)
                                    .closest('[aria-hidden="false"]')
                                    .closest(".parent")
                                    .children("a, button"),
                                !1
                            );
                    });
            }),
            e(".menu.grid .parent.top, .menu.multi-column .parent.top").each(
                function () {
                    e(this)
                        .find("li:last a:last, li:last button:last")
                        .keydown(function (t) {
                            "Tab" !== t.key ||
                                t.shiftKey ||
                                i(
                                    e(this)
                                        .closest('[aria-hidden="false"]')
                                        .closest(".parent")
                                        .children("a, button"),
                                    !1
                                );
                        });
                }
            ));
    });
});
